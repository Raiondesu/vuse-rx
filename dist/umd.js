!function(n,r){"object"==typeof exports&&"undefined"!=typeof module?r(exports,require("rxjs"),require("rxjs/operators"),require("vue")):"function"==typeof define&&define.amd?define(["exports","rxjs","rxjs/operators","vue"],r):r((n="undefined"!=typeof globalThis?globalThis:n||self).vuseRx={},n.rxjs,n.rxjs.operators,n.Vue)}(this,(function(n,r,t,e){"use strict";var o=function(n){return new r.Observable((function(r){e.getCurrentInstance()&&n((function(){return r.next()}))}))},u=function(n){return t.takeUntil(o(n))},i=u(e.onUnmounted);function c(n){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}var f=function(n,r,t){return null!=r&&"object"===c(r[t])&&"object"===c(n[t])},a=function n(r){return function(t){for(var e in t){var o=t[e];r[e]=!Array.isArray(o)&&f(r,t,e)?n(r[e])(o):o}return r}},s={mutationStrategy:a};var p=function(n){return Object.assign({},n,{subscribe:function(){var r;return Object.assign({},n,{subscription:(r=n.state$).subscribe.apply(r,arguments)})}})},l=function(n){for(var r=arguments.length,t=new Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];return"function"==typeof n?n.apply(void 0,t):n};function v(n,r,t){var o=e.ref(null==t?r.to?r.to(n.value):n.value:t);for(var u in r)(o[u]=b(n,o,r,u,this)).bind();return o}v.with=function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];var e=Object.assign.apply(Object,[{}].concat(r)),o=v.bind(e);return o.with=v.with.bind(e),o};var b=function(n,r,t,o,u){return{bind:function(i){var c=Object.assign({ref:n,map:t[o],watch:u},i),f=c.ref,a=c.map,s=c.watch;r[o].stop(),r[o].stop="to"===o?e.watch(f,(function(n){return r.value=a(n)}),Object.assign({},u,s)):e.watch(r,(function(n){return f.value=a(n)}),Object.assign({},u,s))},stop:function(){}}};n.deep=function n(r){return function(t){for(var e in t)r[e]=f(r,t,e)?n(r[e])(t[e]):t[e];return r}},n.deepReplaceArray=a,n.fromHook=o,n.fromRef=function(n,t){return i(new r.Observable((function(r){return e.watch(n,(function(n){return r.next(n)}),t)})))},n.mapError=function(n){return t.catchError((function(r,t){throw n(r,t)}))},n.pipeUntil=u,n.refFrom=function(n,t){if("object"===c(n))try{var o=e.ref(t);return i(r.from(n)).subscribe({next:function(n){return o.value=n}}),o}catch(n){}return e.isProxy(n)?e.toRef(n,t):e.ref(n)},n.refsFrom=function(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=e.ref(t.next),u=e.ref(t.error),c=i(r.from(n));return{next:o,error:u,value$:c,subscription:c.subscribe({next:function(n){return o.value=n},error:function(n){return u.value=n}})}},n.setRef=function(n){return t.tap({next:function(r){return n.value=r}})},n.shallow=function(n){return function(r){for(var t in r)n[t]=r[t];return n}},n.syncRef=v,n.untilUnmounted=i,n.useRxState=function(n,o){var u=Object.assign({},s,o).mutationStrategy;return function(o,c){var f=e.reactive(l(n)),a={},s={},v=[],b=!1,y=void 0,m={error:function(n){y=n},complete:function(){b=!0}},d=function(n){var e=new r.Subject;a[n]=function(){for(var r=arguments.length,t=new Array(r),u=0;u<r;u++)t[u]=arguments[u];return e.next(o[n].apply(o,t))},v.push(s["".concat(n,"$")]=t.mergeScan((function(n,o){return o=l(o,n,m),(r.isObservable(o)?o:r.of(o)).pipe(t.map(u(n,u)),t.tap({next:function(){return y?y=e.error(y):b&&e.complete()}}))}),f)(e))};for(var h in o)d(h);var x=r.merge.apply(void 0,v);return p({actions:a,state:e.readonly(f),state$:i(c?c(x,o,f,s,m).pipe(t.scan((function(n,r){return u(n,u)(r)}),f)):x),actions$:s})}},Object.defineProperty(n,"__esModule",{value:!0})}));
//# sourceMappingURL=umd.js.map
