(function(e,n){typeof exports=="object"&&typeof module<"u"?n(exports,require("markdown-it"),require("fs/promises")):typeof define=="function"&&define.amd?define(["exports","markdown-it","fs/promises"],n):(e=typeof globalThis<"u"?globalThis:e||self,n(e.SearchPlugin={},e.MarkdownIt,e.fs))})(this,function(exports,MarkdownIt,fs){"use strict";const _interopDefaultLegacy=e=>e&&typeof e=="object"&&"default"in e?e:{default:e};function _interopNamespace(e){if(e&&e.__esModule)return e;const n=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const i in e)if(i!=="default"){const s=Object.getOwnPropertyDescriptor(e,i);Object.defineProperty(n,i,s.get?s:{enumerable:!0,get:()=>e[i]})}}return n.default=e,Object.freeze(n)}const MarkdownIt__default=_interopDefaultLegacy(MarkdownIt),fs__namespace=_interopNamespace(fs),rControl=/[\u0000-\u001f]/g,rSpecial=/[\s~`!@#$%^&*()\-_+=[\]{}|\\;:"'“”‘’<>,.?/]+/g,rCombining=/[\u0300-\u036F]/g,slugify=e=>e.normalize("NFKD").replace(rCombining,"").replace(rControl,"").replace(rSpecial,"-").replace(/-{2,}/g,"-").replace(/^-+|-+$/g,"").replace(/^(\d)/,"_$1").toLowerCase(),{readdir,readFile}=fs__namespace;let rootPath="";const replaceMdSyntax=e=>e.replace(/\[(.*?)\]\(.*?\)/g,"$1").replace(/(\*+)(\s*\b)([^\*]*)(\b\s*)(\*+)/gm,"$3"),getFileList=async e=>{let n=[];const i=await readdir(e,{withFileTypes:!0});for(const s of i)s.isDirectory()&&s.name!="node_modules"?n=[...n,...await getFileList(`${e}/${s.name}`)]:s.name.endsWith(".md")&&n.push(`${e}/${s.name}`);return n},removeScriptTag=e=>e.replace(/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,"").trim(),removeStyleTag=e=>e.replace(/<style\b[^<]*(?:(?!<\/style>)<[^<]*)*<\/style>/gi,"").trim(),processMdFiles=async e=>{rootPath=e;let n=await getFileList(e),i=[];for(let s=0;s<n.length;s++){const r=n[s];let o=await readFile(r,{encoding:"utf8"}),l=removeStyleTag(removeScriptTag(replaceMdSyntax(o)));i.push({content:l,path:r})}return Promise.resolve(i)},parseMdContent=(e,n)=>e.split(/(^|\s)#{2}\s/gi).filter(o=>o!=""&&o!=`
`).map(o=>{let l=o.split(`
`);return{anchor:(l==null?void 0:l.shift())||"",content:l.join(`
`),path:n}}),buildDoc=(e,n)=>{let i,s,r=e.anchor;(i=/\{(.*?)\}/m.exec(e.anchor))!==null&&(r=i[0],s=e.anchor.replace(/\{(.*?)\}/m,"")),r=slugify(r),r[0]=="#"&&(r=r.replace("#",""));let o=e.path.replace(rootPath+"/","").replace("md","html");return n.includes(".0")||(o+=`#${slugify(r)}`),s?{id:n,link:o,b:e.content,a:r,t:s}:{id:n,link:o,b:e.content,a:r}},buildDocs=async(e,n)=>{const i=await processMdFiles(e),s=[];if(i!==void 0)for(let r=0;r<i.length;r++){const o=i[r];let l=parseMdContent(o.content,o.path);for(let h=0;h<l.length;h++){const f=l[h];s.push(buildDoc(f,r+"."+h))}}return s};var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},flexsearch_bundle={exports:{}};(function(module){(function _f(self){try{module&&(self=module)}catch(e){}self._factory=_f;var t;function u(e){return typeof e<"u"?e:!0}function aa(e){const n=Array(e);for(let i=0;i<e;i++)n[i]=v();return n}function v(){return Object.create(null)}function ba(e,n){return n.length-e.length}function x(e){return typeof e=="string"}function C(e){return typeof e=="object"}function D(e){return typeof e=="function"}function ca(e,n){var i=da;if(e&&(n&&(e=E(e,n)),this.H&&(e=E(e,this.H)),this.J&&1<e.length&&(e=E(e,this.J)),i||i==="")){if(e=e.split(i),this.filter){n=this.filter,i=e.length;const s=[];for(let r=0,o=0;r<i;r++){const l=e[r];l&&!n[l]&&(s[o++]=l)}e=s}return e}return e}const da=/[\p{Z}\p{S}\p{P}\p{C}]+/u,ea=/[\u0300-\u036f]/g;function fa(e,n){const i=Object.keys(e),s=i.length,r=[];let o="",l=0;for(let h=0,f,p;h<s;h++)f=i[h],(p=e[f])?(r[l++]=F(n?"(?!\\b)"+f+"(\\b|_)":f),r[l++]=p):o+=(o?"|":"")+f;return o&&(r[l++]=F(n?"(?!\\b)("+o+")(\\b|_)":"("+o+")"),r[l]=""),r}function E(e,n){for(let i=0,s=n.length;i<s&&(e=e.replace(n[i],n[i+1]),e);i+=2);return e}function F(e){return new RegExp(e,"g")}function ha(e){let n="",i="";for(let s=0,r=e.length,o;s<r;s++)(o=e[s])!==i&&(n+=i=o);return n}var ja={encode:ia,F:!1,G:""};function ia(e){return ca.call(this,(""+e).toLowerCase(),!1)}const ka={},G={};function la(e){I(e,"add"),I(e,"append"),I(e,"search"),I(e,"update"),I(e,"remove")}function I(e,n){e[n+"Async"]=function(){const i=this,s=arguments;var r=s[s.length-1];let o;return D(r)&&(o=r,delete s[s.length-1]),r=new Promise(function(l){setTimeout(function(){i.async=!0;const h=i[n].apply(i,s);i.async=!1,l(h)})}),o?(r.then(o),this):r}}function ma(e,n,i,s){const r=e.length;let o=[],l,h,f=0;s&&(s=[]);for(let p=r-1;0<=p;p--){const m=e[p],_=m.length,w=v();let k=!l;for(let g=0;g<_;g++){const y=m[g],j=y.length;if(j)for(let R=0,q,A;R<j;R++)if(A=y[R],l){if(l[A]){if(!p){if(i)i--;else if(o[f++]=A,f===n)return o}(p||s)&&(w[A]=1),k=!0}if(s&&(q=(h[A]||0)+1,h[A]=q,q<r)){const B=s[q-2]||(s[q-2]=[]);B[B.length]=A}}else w[A]=1}if(s)l||(h=w);else if(!k)return[];l=w}if(s)for(let p=s.length-1,m,_;0<=p;p--){m=s[p],_=m.length;for(let w=0,k;w<_;w++)if(k=m[w],!l[k]){if(i)i--;else if(o[f++]=k,f===n)return o;l[k]=1}}return o}function na(e,n){const i=v(),s=v(),r=[];for(let o=0;o<e.length;o++)i[e[o]]=1;for(let o=0,l;o<n.length;o++){l=n[o];for(let h=0,f;h<l.length;h++)f=l[h],i[f]&&!s[f]&&(s[f]=1,r[r.length]=f)}return r}function J(e){this.l=e!==!0&&e,this.cache=v(),this.h=[]}function oa(e,n,i){C(e)&&(e=e.query);let s=this.cache.get(e);return s||(s=this.search(e,n,i),this.cache.set(e,s)),s}J.prototype.set=function(e,n){if(!this.cache[e]){var i=this.h.length;for(i===this.l?delete this.cache[this.h[i-1]]:i++,--i;0<i;i--)this.h[i]=this.h[i-1];this.h[0]=e}this.cache[e]=n},J.prototype.get=function(e){const n=this.cache[e];if(this.l&&n&&(e=this.h.indexOf(e))){const i=this.h[e-1];this.h[e-1]=this.h[e],this.h[e]=i}return n};const qa={memory:{charset:"latin:extra",D:3,B:4,m:!1},performance:{D:3,B:3,s:!1,context:{depth:2,D:1}},match:{charset:"latin:extra",G:"reverse"},score:{charset:"latin:advanced",D:20,B:3,context:{depth:3,D:9}},default:{}};function ra(e,n,i,s,r,o,l){setTimeout(function(){const h=e(i?i+"."+s:s,JSON.stringify(l));h&&h.then?h.then(function(){n.export(e,n,i,r,o+1)}):n.export(e,n,i,r,o+1)})}function K(e,n){if(!(this instanceof K))return new K(e);var i;if(e){x(e)?e=qa[e]:(i=e.preset)&&(e=Object.assign({},i[i],e)),i=e.charset;var s=e.lang;x(i)&&(i.indexOf(":")===-1&&(i+=":default"),i=G[i]),x(s)&&(s=ka[s])}else e={};let r,o,l=e.context||{};if(this.encode=e.encode||i&&i.encode||ia,this.register=n||v(),this.D=r=e.resolution||9,this.G=n=i&&i.G||e.tokenize||"strict",this.depth=n==="strict"&&l.depth,this.l=u(l.bidirectional),this.s=o=u(e.optimize),this.m=u(e.fastupdate),this.B=e.minlength||1,this.C=e.boost,this.map=o?aa(r):v(),this.A=r=l.resolution||1,this.h=o?aa(r):v(),this.F=i&&i.F||e.rtl,this.H=(n=e.matcher||s&&s.H)&&fa(n,!1),this.J=(n=e.stemmer||s&&s.J)&&fa(n,!0),i=n=e.filter||s&&s.filter){i=n,s=v();for(let h=0,f=i.length;h<f;h++)s[i[h]]=1;i=s}this.filter=i,this.cache=(n=e.cache)&&new J(n)}t=K.prototype,t.append=function(e,n){return this.add(e,n,!0)},t.add=function(e,n,i,s){if(n&&(e||e===0)){if(!s&&!i&&this.register[e])return this.update(e,n);if(n=this.encode(n),s=n.length){const p=v(),m=v(),_=this.depth,w=this.D;for(let k=0;k<s;k++){let g=n[this.F?s-1-k:k];var r=g.length;if(g&&r>=this.B&&(_||!m[g])){var o=L(w,s,k),l="";switch(this.G){case"full":if(2<r){for(o=0;o<r;o++)for(var h=r;h>o;h--)if(h-o>=this.B){var f=L(w,s,k,r,o);l=g.substring(o,h),M(this,m,l,f,e,i)}break}case"reverse":if(1<r){for(h=r-1;0<h;h--)l=g[h]+l,l.length>=this.B&&M(this,m,l,L(w,s,k,r,h),e,i);l=""}case"forward":if(1<r){for(h=0;h<r;h++)l+=g[h],l.length>=this.B&&M(this,m,l,o,e,i);break}default:if(this.C&&(o=Math.min(o/this.C(n,g,k)|0,w-1)),M(this,m,g,o,e,i),_&&1<s&&k<s-1){for(r=v(),l=this.A,o=g,h=Math.min(_+1,s-k),r[o]=1,f=1;f<h;f++)if((g=n[this.F?s-1-k-f:k+f])&&g.length>=this.B&&!r[g]){r[g]=1;const y=this.l&&g>o;M(this,p,y?o:g,L(l+(s/2>l?0:1),s,k,h-1,f-1),e,i,y?g:o)}}}}}this.m||(this.register[e]=1)}}return this};function L(e,n,i,s,r){return i&&1<e?n+(s||0)<=e?i+(r||0):(e-1)/(n+(s||0))*(i+(r||0))+1|0:0}function M(e,n,i,s,r,o,l){let h=l?e.h:e.map;(!n[i]||l&&!n[i][l])&&(e.s&&(h=h[s]),l?(n=n[i]||(n[i]=v()),n[l]=1,h=h[l]||(h[l]=v())):n[i]=1,h=h[i]||(h[i]=[]),e.s||(h=h[s]||(h[s]=[])),o&&h.includes(r)||(h[h.length]=r,e.m&&(e=e.register[r]||(e.register[r]=[]),e[e.length]=h)))}t.search=function(e,n,i){i||(!n&&C(e)?(i=e,e=i.query):C(n)&&(i=n));let s=[],r,o,l=0;if(i){e=i.query||e,n=i.limit,l=i.offset||0;var h=i.context;o=i.suggest}if(e&&(e=this.encode(""+e),r=e.length,1<r)){i=v();var f=[];for(let m=0,_=0,w;m<r;m++)if((w=e[m])&&w.length>=this.B&&!i[w])if(this.s||o||this.map[w])f[_++]=w,i[w]=1;else return s;e=f,r=e.length}if(!r)return s;n||(n=100),h=this.depth&&1<r&&h!==!1,i=0;let p;h?(p=e[0],i=1):1<r&&e.sort(ba);for(let m,_;i<r;i++){if(_=e[i],h?(m=sa(this,s,o,n,l,r===2,_,p),o&&m===!1&&s.length||(p=_)):m=sa(this,s,o,n,l,r===1,_),m)return m;if(o&&i===r-1){if(f=s.length,!f){if(h){h=0,i=-1;continue}return s}if(f===1)return ta(s[0],n,l)}}return ma(s,n,l,o)};function sa(e,n,i,s,r,o,l,h){let f=[],p=h?e.h:e.map;if(e.s||(p=ua(p,l,h,e.l)),p){let m=0;const _=Math.min(p.length,h?e.A:e.D);for(let w=0,k=0,g,y;w<_&&!((g=p[w])&&(e.s&&(g=ua(g,l,h,e.l)),r&&g&&o&&(y=g.length,y<=r?(r-=y,g=null):(g=g.slice(r),r=0)),g&&(f[m++]=g,o&&(k+=g.length,k>=s))));w++);if(m){if(o)return ta(f,s,0);n[n.length]=f;return}}return!i&&f}function ta(e,n,i){return e=e.length===1?e[0]:[].concat.apply([],e),i||e.length>n?e.slice(i,i+n):e}function ua(e,n,i,s){return i?(s=s&&n>i,e=(e=e[s?n:i])&&e[s?i:n]):e=e[n],e}t.contain=function(e){return!!this.register[e]},t.update=function(e,n){return this.remove(e).add(e,n)},t.remove=function(e,n){const i=this.register[e];if(i){if(this.m)for(let s=0,r;s<i.length;s++)r=i[s],r.splice(r.indexOf(e),1);else N(this.map,e,this.D,this.s),this.depth&&N(this.h,e,this.A,this.s);if(n||delete this.register[e],this.cache){n=this.cache;for(let s=0,r,o;s<n.h.length;s++)o=n.h[s],r=n.cache[o],r.includes(e)&&(n.h.splice(s--,1),delete n.cache[o])}}return this};function N(e,n,i,s,r){let o=0;if(e.constructor===Array)if(r)n=e.indexOf(n),n!==-1?1<e.length&&(e.splice(n,1),o++):o++;else{r=Math.min(e.length,i);for(let l=0,h;l<r;l++)(h=e[l])&&(o=N(h,n,i,s,r),s||o||delete e[l])}else for(let l in e)(o=N(e[l],n,i,s,r))||delete e[l];return o}t.searchCache=oa,t.export=function(e,n,i,s,r){let o,l;switch(r||(r=0)){case 0:if(o="reg",this.m){l=v();for(let h in this.register)l[h]=1}else l=this.register;break;case 1:o="cfg",l={doc:0,opt:this.s?1:0};break;case 2:o="map",l=this.map;break;case 3:o="ctx",l=this.h;break;default:return}return ra(e,n||this,i,o,s,r,l),!0},t.import=function(e,n){if(n)switch(x(n)&&(n=JSON.parse(n)),e){case"cfg":this.s=!!n.opt;break;case"reg":this.m=!1,this.register=n;break;case"map":this.map=n;break;case"ctx":this.h=n}},la(K.prototype);function va(e){e=e.data;var n=self._index;const i=e.args;var s=e.task;switch(s){case"init":s=e.options||{},e=e.factory,n=s.encode,s.cache=!1,n&&n.indexOf("function")===0&&(s.encode=Function("return "+n)()),e?(Function("return "+e)()(self),self._index=new self.FlexSearch.Index(s),delete self.FlexSearch):self._index=new K(s);break;default:e=e.id,n=n[s].apply(n,i),postMessage(s==="search"?{id:e,msg:n}:{id:e})}}let wa=0;function O(e){if(!(this instanceof O))return new O(e);var n;e?D(n=e.encode)&&(e.encode=n.toString()):e={},(n=(self||window)._factory)&&(n=n.toString());const i=typeof window>"u"&&self.exports,s=this;this.o=xa(n,i,e.worker),this.h=v(),this.o&&(i?this.o.on("message",function(r){s.h[r.id](r.msg),delete s.h[r.id]}):this.o.onmessage=function(r){r=r.data,s.h[r.id](r.msg),delete s.h[r.id]},this.o.postMessage({task:"init",factory:n,options:e}))}P("add"),P("append"),P("search"),P("update"),P("remove");function P(e){O.prototype[e]=O.prototype[e+"Async"]=function(){const n=this,i=[].slice.call(arguments);var s=i[i.length-1];let r;return D(s)&&(r=s,i.splice(i.length-1,1)),s=new Promise(function(o){setTimeout(function(){n.h[++wa]=o,n.o.postMessage({task:e,id:wa,args:i})})}),r?(s.then(r),this):s}}function xa(a,b,c){let d;try{d=b?eval('new (require("worker_threads")["Worker"])("../dist/node/node.js")'):a?new Worker(URL.createObjectURL(new Blob(["onmessage="+va.toString()],{type:"text/javascript"}))):new Worker(x(c)?c:"worker/worker.js",{type:"module"})}catch(e){}return d}function Q(e){if(!(this instanceof Q))return new Q(e);var n=e.document||e.doc||e,i;this.K=[],this.h=[],this.A=[],this.register=v(),this.key=(i=n.key||n.id)&&S(i,this.A)||"id",this.m=u(e.fastupdate),this.C=(i=n.store)&&i!==!0&&[],this.store=i&&v(),this.I=(i=n.tag)&&S(i,this.A),this.l=i&&v(),this.cache=(i=e.cache)&&new J(i),e.cache=!1,this.o=e.worker,this.async=!1,i=v();let s=n.index||n.field||n;x(s)&&(s=[s]);for(let r=0,o,l;r<s.length;r++)o=s[r],x(o)||(l=o,o=o.field),l=C(l)?Object.assign({},e,l):e,this.o&&(i[o]=new O(l),i[o].o||(this.o=!1)),this.o||(i[o]=new K(l,this.register)),this.K[r]=S(o,this.A),this.h[r]=o;if(this.C)for(e=n.store,x(e)&&(e=[e]),n=0;n<e.length;n++)this.C[n]=S(e[n],this.A);this.index=i}function S(e,n){const i=e.split(":");let s=0;for(let r=0;r<i.length;r++)e=i[r],0<=e.indexOf("[]")&&(e=e.substring(0,e.length-2))&&(n[s]=!0),e&&(i[s++]=e);return s<i.length&&(i.length=s),1<s?i:i[0]}function T(e,n){if(x(n))e=e[n];else for(let i=0;e&&i<n.length;i++)e=e[n[i]];return e}function U(e,n,i,s,r){if(e=e[r],s===i.length-1)n[r]=e;else if(e)if(e.constructor===Array)for(n=n[r]=Array(e.length),r=0;r<e.length;r++)U(e,n,i,s,r);else n=n[r]||(n[r]=v()),r=i[++s],U(e,n,i,s,r)}function V(e,n,i,s,r,o,l,h){if(e=e[l])if(s===n.length-1){if(e.constructor===Array){if(i[s]){for(n=0;n<e.length;n++)r.add(o,e[n],!0,!0);return}e=e.join(" ")}r.add(o,e,h,!0)}else if(e.constructor===Array)for(l=0;l<e.length;l++)V(e,n,i,s,r,o,l,h);else l=n[++s],V(e,n,i,s,r,o,l,h)}t=Q.prototype,t.add=function(e,n,i){if(C(e)&&(n=e,e=T(n,this.key)),n&&(e||e===0)){if(!i&&this.register[e])return this.update(e,n);for(let s=0,r,o;s<this.h.length;s++)o=this.h[s],r=this.K[s],x(r)&&(r=[r]),V(n,r,this.A,0,this.index[o],e,r[0],i);if(this.I){let s=T(n,this.I),r=v();x(s)&&(s=[s]);for(let o=0,l,h;o<s.length;o++)if(l=s[o],!r[l]&&(r[l]=1,h=this.l[l]||(this.l[l]=[]),!i||!h.includes(e))&&(h[h.length]=e,this.m)){const f=this.register[e]||(this.register[e]=[]);f[f.length]=h}}if(this.store&&(!i||!this.store[e])){let s;if(this.C){s=v();for(let r=0,o;r<this.C.length;r++)o=this.C[r],x(o)?s[o]=n[o]:U(n,s,o,0,o[0])}this.store[e]=s||n}}return this},t.append=function(e,n){return this.add(e,n,!0)},t.update=function(e,n){return this.remove(e).add(e,n)},t.remove=function(e){if(C(e)&&(e=T(e,this.key)),this.register[e]){for(var n=0;n<this.h.length&&(this.index[this.h[n]].remove(e,!this.o),!this.m);n++);if(this.I&&!this.m)for(let i in this.l){n=this.l[i];const s=n.indexOf(e);s!==-1&&(1<n.length?n.splice(s,1):delete this.l[i])}this.store&&delete this.store[e],delete this.register[e]}return this},t.search=function(e,n,i,s){i||(!n&&C(e)?(i=e,e=""):C(n)&&(i=n,n=0));let r=[],o=[],l,h,f,p,m,_,w=0;if(i)if(i.constructor===Array)f=i,i=null;else{if(e=i.query||e,f=(l=i.pluck)||i.index||i.field,p=i.tag,h=this.store&&i.enrich,m=i.bool==="and",n=i.limit||n||100,_=i.offset||0,p&&(x(p)&&(p=[p]),!e)){for(let g=0,y;g<p.length;g++)(y=ya.call(this,p[g],n,_,h))&&(r[r.length]=y,w++);return w?r:[]}x(f)&&(f=[f])}f||(f=this.h),m=m&&(1<f.length||p&&1<p.length);const k=!s&&(this.o||this.async)&&[];for(let g=0,y,j,R;g<f.length;g++){let q;if(j=f[g],x(j)||(q=j,j=q.field,e=q.query||e,n=q.limit||n),k)k[g]=this.index[j].searchAsync(e,n,q||i);else{if(s?y=s[g]:y=this.index[j].search(e,n,q||i),R=y&&y.length,p&&R){const A=[];let B=0;m&&(A[0]=[y]);for(let $=0,H,z;$<p.length;$++)H=p[$],(R=(z=this.l[H])&&z.length)&&(B++,A[A.length]=m?[z]:z);B&&(y=m?ma(A,n||100,_||0):na(y,A),R=y.length)}if(R)o[w]=j,r[w++]=y;else if(m)return[]}}if(k){const g=this;return new Promise(function(y){Promise.all(k).then(function(j){y(g.search(e,n,i,j))})})}if(!w)return[];if(l&&(!h||!this.store))return r[0];for(let g=0,y;g<o.length;g++){if(y=r[g],y.length&&h&&(y=za.call(this,y)),l)return y;r[g]={field:o[g],result:y}}return r};function ya(e,n,i,s){let r=this.l[e],o=r&&r.length-i;if(o&&0<o)return(o>n||i)&&(r=r.slice(i,i+n)),s&&(r=za.call(this,r)),{tag:e,result:r}}function za(e){const n=Array(e.length);for(let i=0,s;i<e.length;i++)s=e[i],n[i]={id:s,doc:this.store[s]};return n}t.contain=function(e){return!!this.register[e]},t.get=function(e){return this.store[e]},t.set=function(e,n){return this.store[e]=n,this},t.searchCache=oa,t.export=function(e,n,i,s,r){if(r||(r=0),s||(s=0),s<this.h.length){const o=this.h[s],l=this.index[o];n=this,setTimeout(function(){l.export(e,n,r?o:"",s,r++)||(s++,r=1,n.export(e,n,o,s,r))})}else{let o,l;switch(r){case 1:o="tag",l=this.l;break;case 2:o="store",l=this.store;break;default:return}ra(e,this,i,o,s,r,l)}},t.import=function(e,n){if(n)switch(x(n)&&(n=JSON.parse(n)),e){case"tag":this.l=n;break;case"reg":this.m=!1,this.register=n;for(let s=0,r;s<this.h.length;s++)r=this.index[this.h[s]],r.register=n,r.m=!1;break;case"store":this.store=n;break;default:e=e.split(".");const i=e[0];e=e[1],i&&e&&this.index[i].import(e,n)}},la(Q.prototype);var Ba={encode:Aa,F:!1,G:""};const Ca=[F("[\xE0\xE1\xE2\xE3\xE4\xE5]"),"a",F("[\xE8\xE9\xEA\xEB]"),"e",F("[\xEC\xED\xEE\xEF]"),"i",F("[\xF2\xF3\xF4\xF5\xF6\u0151]"),"o",F("[\xF9\xFA\xFB\xFC\u0171]"),"u",F("[\xFD\u0177\xFF]"),"y",F("\xF1"),"n",F("[\xE7c]"),"k",F("\xDF"),"s",F(" & ")," and "];function Aa(e){var n=e=""+e;return n.normalize&&(n=n.normalize("NFD").replace(ea,"")),ca.call(this,n.toLowerCase(),!e.normalize&&Ca)}var Ea={encode:Da,F:!1,G:"strict"};const Fa=/[^a-z0-9]+/,Ga={b:"p",v:"f",w:"f",z:"s",x:"s",\u00DF:"s",d:"t",n:"m",c:"k",g:"k",j:"k",q:"k",i:"e",y:"e",u:"o"};function Da(e){e=Aa.call(this,e).join(" ");const n=[];if(e){const i=e.split(Fa),s=i.length;for(let r=0,o,l=0;r<s;r++)if((e=i[r])&&(!this.filter||!this.filter[e])){o=e[0];let h=Ga[o]||o,f=h;for(let p=1;p<e.length;p++){o=e[p];const m=Ga[o]||o;m&&m!==f&&(h+=m,f=m)}n[l++]=h}}return n}var Ia={encode:Ha,F:!1,G:""};const Ja=[F("ae"),"a",F("oe"),"o",F("sh"),"s",F("th"),"t",F("ph"),"f",F("pf"),"f",F("(?![aeo])h(?![aeo])"),"",F("(?!^[aeo])h(?!^[aeo])"),""];function Ha(e,n){return e&&(e=Da.call(this,e).join(" "),2<e.length&&(e=E(e,Ja)),n||(1<e.length&&(e=ha(e)),e&&(e=e.split(" ")))),e||[]}var La={encode:Ka,F:!1,G:""};const Ma=F("(?!\\b)[aeo]");function Ka(e){return e&&(e=Ha.call(this,e,!0),1<e.length&&(e=e.replace(Ma,"")),1<e.length&&(e=ha(e)),e&&(e=e.split(" "))),e||[]}G["latin:default"]=ja,G["latin:simple"]=Ba,G["latin:balance"]=Ea,G["latin:advanced"]=Ia,G["latin:extra"]=La;const W=self;let Y;const Z={Index:K,Document:Q,Worker:O,registerCharset:function(e,n){G[e]=n},registerLanguage:function(e,n){ka[e]=n}};(Y=W.define)&&Y.amd?Y([],function(){return Z}):W.exports?W.exports=Z:W.FlexSearch=Z})(commonjsGlobal)})(flexsearch_bundle);const FlexSearch=flexsearch_bundle.exports,md=new MarkdownIt__default.default;let MAX_PREVIEW_CHARS=62;const buildIndexSearch=(e,n)=>{var i=new FlexSearch.Index(n);return e.forEach(s=>{i.add(s.id,s.a+" "+s.b)}),i};function buildPreviews(e){const n={};for(let i=0;i<e.length;i++){const s=e[i];let r=md.render(s.b).replace(/(<([^>]+)>)/gi,"");r==""&&(r=s.b),r.length>MAX_PREVIEW_CHARS&&(r=r.slice(0,MAX_PREVIEW_CHARS)+" ..."),n[s.id]={t:s.t||s.a,p:r,l:s.link,a:s.a}}return n}async function IndexSearch(e,n){console.log("  \u{1F50E} Indexing..."),n.previewLength&&(MAX_PREVIEW_CHARS=n.previewLength);const i=await buildDocs(e),s=buildPreviews(i),r=buildIndexSearch(i,n);var o={reg:JSON.stringify(r.registry),cfg:JSON.stringify(r.cfg),map:JSON.stringify(r.map),ctx:JSON.stringify(r.ctx)};const l=`const INDEX_DATA = ${JSON.stringify(o)};
  const PREVIEW_LOOKUP = ${JSON.stringify(s)};
  const Options = ${JSON.stringify(n)};
  const data = { INDEX_DATA, PREVIEW_LOOKUP, Options };
  export default data;`;return console.log("  \u{1F50E} Done."),l}const DEFAULT_OPTIONS={previewLength:62,buttonLabel:"Search",placeholder:"Search docs"};function SearchPlugin(e){const n={...DEFAULT_OPTIONS,...e};let i;const s="virtual:search-data",r="\0"+s;return{name:"vite-plugin-search",enforce:"pre",configResolved(o){i=o},config:()=>({resolve:{alias:{"./VPNavBarSearch.vue":"vitepress-plugin-search/Search.vue"}}}),async resolveId(o){if(o===s)return r},async load(o){if(o===r)return i.build.ssr?`const INDEX_DATA = { "version": "2.3.9", "fields": ["b", "a"], "fieldVectors": [], "invertedIndex": [], "pipeline": ["stemmer"] };
				const PREVIEW_LOOKUP = {};
				const Options = ${JSON.stringify(n)};
				const data = { INDEX_DATA, PREVIEW_LOOKUP, Options };
				export default data;`:await IndexSearch(i.root,n)}}}exports.SearchPlugin=SearchPlugin,Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
